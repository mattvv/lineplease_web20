"use strict";angular.module("ExternalDataServices",[]).factory("ParseAbstractService",["ParseQueryAngular",function(a){var b=function(b){return b.prototype=_.extend(b.prototype,{load:function(){return a(this,{functionToCall:"fetch"})},saveParse:function(b){return b&&"object"==typeof b&&this.set(b),a(this,{functionToCall:"save",params:[null]})},destroyParse:function(){return a(this,{functionToCall:"destroy"})}}),b},c=function(b){return b.prototype=_.extend(b.prototype,{load:function(){return a(this,{functionToCall:"fetch"})}}),b};return{EnhanceObject:b,EnhanceCollection:c}}]),angular.module("ParseServices",[]).factory("ExtendParseSDK",["ParseAbstractService",function(a){Parse.Object.extendAngular=function(b){return a.EnhanceObject(Parse.Object.extend(b))},Parse.Collection.extendAngular=function(b){return a.EnhanceCollection(Parse.Collection.extend(b))}}]).factory("ParseSDK",function(){Parse.initialize("vO4vcHp53pKE9WC4nmljDP2a5RzbYXVP7wvZkFo5","gsowB2J7bIfN6aGnFQ95wciSmuUJDvdtcUvx3qUU"),window.fbPromise.then(function(){Parse.FacebookUtils.init({appId:0xaf39b825b91c,channelUrl:"http://app.linepleaseapp.com/",cookie:!0,xfbml:!0,frictionlessRequests:!0})})}),angular.module("ParseServices").factory("ParseQueryAngular",["$q","$timeout","_",function(a,b,c){var d=b;return function(b,e){var f="find";c.isUndefined(e)||c.isUndefined(e.functionToCall)||(f=e.functionToCall);var g=a.defer(),h=[{success:function(a){d(function(){g.resolve(a)})},error:function(a,b){d(function(){g.reject(b)})}}];return e&&e.params&&(h=e.params.concat(h)),e&&e.mergeParams&&(h[0]=c.extend(h[0],e.mergeParams)),b[f].apply(b,h),g.promise}}]),angular.module("ParseServices").factory("ParseCloudCodeAngular",["$q","$timeout","ParseQueryAngular",function(a,b,c){return function(a,b){return c(Parse.Cloud,{functionToCall:"run",params:[a,b]})}}]),angular.module("FacebookPatch",[]).factory("FacebookAngularPatch",["$q","$timeout","_",function(a,b,c){var d=function(){var d=[].splice.call(arguments,0),e=a.defer(),f=b;return window.fbPromise.then(function(){d.push(function(a){return c.isUndefined(a.error)?(f(function(){e.resolve(a)}),void 0):(f(function(){e.reject(a.error)}),void 0)}),FB.api.apply(FB,d)}),e.promise};window.fbPromise.then(function(){FB.apiAngular=d})}]),function(a){a.fn.blurjs=function(b){function c(){this.a=this.b=this.g=this.r=0,this.next=null}var d=document.createElement("canvas"),e=!1,f=a(this).selector.replace(/[^a-zA-Z0-9]/g,"");if(d.getContext){var b=a.extend({source:"body",radius:5,overlay:"",offset:{x:0,y:0},optClass:"",cache:!1,cacheKeyPrefix:"blurjs-",draggable:!1,debug:!1},b),g=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],h=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];return this.each(function(){var i=a(this),j=a(b.source),k=j.css("backgroundImage").replace(/"/g,"").replace(/url\(|\)$/gi,"");ctx=d.getContext("2d"),tempImg=new Image,tempImg.onload=function(){if(e)a=tempImg.src;else{d.style.display="none",d.width=tempImg.width,d.height=tempImg.height,ctx.drawImage(tempImg,0,0);var a=d.width,l=d.height,m=b.radius;if(!(isNaN(m)||1>m)){var n,m=0|m,o=d.getContext("2d");try{try{n=o.getImageData(0,0,a,l)}catch(p){try{netscape.security.PrivilegeManager.enablePrivilege("UniversalBrowserRead"),n=o.getImageData(0,0,a,l)}catch(q){throw alert("Cannot access local image"),Error("unable to access local image data: "+q)}}}catch(r){throw alert("Cannot access image"),Error("unable to access image data: "+r)}var s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L=n.data;s=m+m+1;var M=a-1,N=l-1,O=m+1,P=O*(O+1)/2,Q=new c,R=Q;for(u=1;s>u;u++)if(R=R.next=new c,u==O)var S=R;R.next=Q,R=u=null,x=w=0;var T=g[m],U=h[m];for(t=0;l>t;t++){for(E=F=G=y=z=A=0,B=O*(H=L[w]),C=O*(I=L[w+1]),D=O*(J=L[w+2]),y+=P*H,z+=P*I,A+=P*J,R=Q,u=0;O>u;u++)R.r=H,R.g=I,R.b=J,R=R.next;for(u=1;O>u;u++)v=w+((u>M?M:u)<<2),y+=(R.r=H=L[v])*(K=O-u),z+=(R.g=I=L[v+1])*K,A+=(R.b=J=L[v+2])*K,E+=H,F+=I,G+=J,R=R.next;for(u=Q,R=S,s=0;a>s;s++)L[w]=y*T>>U,L[w+1]=z*T>>U,L[w+2]=A*T>>U,y-=B,z-=C,A-=D,B-=u.r,C-=u.g,D-=u.b,v=x+((v=s+m+1)<M?v:M)<<2,E+=u.r=L[v],F+=u.g=L[v+1],G+=u.b=L[v+2],y+=E,z+=F,A+=G,u=u.next,B+=H=R.r,C+=I=R.g,D+=J=R.b,E-=H,F-=I,G-=J,R=R.next,w+=4;x+=a}for(s=0;a>s;s++){for(F=G=E=z=A=y=0,w=s<<2,B=O*(H=L[w]),C=O*(I=L[w+1]),D=O*(J=L[w+2]),y+=P*H,z+=P*I,A+=P*J,R=Q,u=0;O>u;u++)R.r=H,R.g=I,R.b=J,R=R.next;for(v=a,u=1;m>=u;u++)w=v+s<<2,y+=(R.r=H=L[w])*(K=O-u),z+=(R.g=I=L[w+1])*K,A+=(R.b=J=L[w+2])*K,E+=H,F+=I,G+=J,R=R.next,N>u&&(v+=a);for(w=s,u=Q,R=S,t=0;l>t;t++)v=w<<2,L[v]=y*T>>U,L[v+1]=z*T>>U,L[v+2]=A*T>>U,y-=B,z-=C,A-=D,B-=u.r,C-=u.g,D-=u.b,v=s+((v=t+O)<N?v:N)*a<<2,y+=E+=u.r=L[v],z+=F+=u.g=L[v+1],A+=G+=u.b=L[v+2],u=u.next,B+=H=R.r,C+=I=R.g,D+=J=R.b,E-=H,F-=I,G-=J,R=R.next,w+=a}o.putImageData(n,0,0)}0!=b.overlay&&(ctx.beginPath(),ctx.rect(0,0,tempImg.width,tempImg.width),ctx.fillStyle=b.overlay,ctx.fill());var a=d.toDataURL();if(b.cache)try{b.debug&&console.log("Cache Set"),localStorage.setItem(b.cacheKeyPrefix+f+"-"+k+"-data-image",a)}catch(V){console.log(V)}}l=j.css("backgroundAttachment"),m="fixed"==l?"":"-"+(i.offset().left-j.offset().left-b.offset.x)+"px -"+(i.offset().top-j.offset().top-b.offset.y)+"px",i.css({"background-image":'url("'+a+'")',"background-repeat":j.css("backgroundRepeat"),"background-position":m,"background-attachment":l}),0!=b.optClass&&i.addClass(b.optClass),b.draggable&&(i.css({"background-attachment":"fixed","background-position":"0 0"}),i.draggable())},Storage.prototype.cacheChecksum=function(a){var c,d="";for(c in a)var e=a[c],d="[object Object]"==e.toString()?d+(e.x.toString()+e.y.toString()+",").replace(/[^a-zA-Z0-9]/g,""):d+(e+",").replace(/[^a-zA-Z0-9]/g,"");this.getItem(b.cacheKeyPrefix+f+"-"+k+"-options-cache")!=d&&(this.removeItem(b.cacheKeyPrefix+f+"-"+k+"-options-cache"),this.setItem(b.cacheKeyPrefix+f+"-"+k+"-options-cache",d),b.debug&&console.log("Settings Changed, Cache Emptied"))};var l=null;b.cache&&(localStorage.cacheChecksum(b),l=localStorage.getItem(b.cacheKeyPrefix+f+"-"+k+"-data-image")),null!=l?(b.debug&&console.log("Cache Used"),e=!0,tempImg.src=l):(b.debug&&console.log("Source Used"),tempImg.src=k)})}}}(jQuery);